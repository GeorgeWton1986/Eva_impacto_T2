#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,   #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,  #Calcular los efectos fijos
plm,  #Datos de panel
knitr   #Visualizar tablas adicionales
)
# Definir URL del repositorio
github_url <- "https://github.com/GeorgeWton1986/Eva_impacto_T2.git"
# Cargar datos
corruption_data <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
github_url <- "https://github.com/GeorgeWton1986/Eva_impacto_T2.git"
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,   #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,  #Calcular los efectos fijos
plm,  #Datos de panel
knitr   #Visualizar tablas adicionales
)
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
View(BD_0)
# Ver estructura de los datos
glimpse(BD_0)
head(BD_0)
#Verificacion de variables
summary(BD_0)
head(BD_0)
View(BD_0)
View(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Ver estructura de los datos
glimpse(BD_0)
head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
View(BD_0)
View(BD_0)
View(BD_0)
#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,   #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,  #Calcular los efectos fijos
plm,  #Datos de panel
knitr,   #Visualizar tablas adicionales
ivreg  #Regresiones por variables instrumentales
)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Ver estructura de los datos
glimpse(BD_0)
head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
View(BD_0)
View(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
View(BD_0)
# Filtrar datos offshore
#5. Para este taller, corran la regresión únicamente para municipios costeros (coastal = 1) y que reciben petróleo únicamente del mar (onshore = 0).
BD_filtrada <- BD_0 %>%
filter(coastal == 1,
onshore == 0)
View(BD_filtrada)
print(paste("Observaciones después del filtro:", nrow(data_filtered)))
print(paste("Observaciones después del filtro:", nrow(BD_filtrada)))
#Regresion del modelo simple.
etapa_1 <- lm(mun_budget_revenue2000_pred_c ~ oilandgasvalue2000_cap+
latitude1998 + longitude1998 + dist_federal_capital1998 +
dist_state_capital1998 + state_capital,
data = BD_filtrada)
# Resultados primera etapa
summary(first_stage)
#Regresion del modelo simple.
etapa_1 <- lm(mun_budget_revenue2000_pred_c ~ oilandgasvalue2000_cap+
latitude1998 + longitude1998 + dist_federal_capital1998 +
dist_state_capital1998 + state_capital,
data = BD_filtrada)
# Resultados primera etapa
summary(etapa_1)
# Estadísticos de relevancia
coef_oil <- summary(etapa_1)$coefficients["oilandgasvalue2000_cap", ]
t_stat <- coef_oil["t value"]
f_stat <- summary(etapa_1)$fstatistic[1]
# Crear tabla para primera etapa
stargazer(etapa_1, type = "text",
title = "Primera Etapa: Ingresos Municipales",
dep.var.labels = "Ingresos Municipales per cápita 2000")
print(paste("t-estadístico:", round(t_stat, 3)))
print(paste("F-estadístico:", round(f_stat, 3)))
print(paste("¿Instrumento relevante? (t > 1.96):", abs(t_stat) > 1.96))
print(paste("¿Instrumento fuerte? (F > 10):", f_stat > 10))
# Crear tabla para primera etapa
stargazer(etapa_1, type = "text",
title = "Primera Etapa: Ingresos Municipales",
omit = c("latitude1998", "longitude1998", "dist_federal_capital1998",
"dist_state_capital1998", "state_capital"),
dep.var.labels = "Ingresos Municipales per cápita 2000")
print(paste("t-estadístico:", round(t_stat, 3)))
print(paste("F-estadístico:", round(f_stat, 3)))
print(paste("¿Instrumento relevante? (t > 1.96):", abs(t_stat) > 1.96))
print(paste("¿Instrumento fuerte? (F > 10):", f_stat > 10))
# Crear tabla para primera etapa
stargazer(etapa_1, type = "text",
title = "Primera Etapa: Ingresos Municipales",
omit = c("latitude1998", "longitude1998", "dist_federal_capital1998",
"dist_state_capital1998", "state_capital", "Constant"),
dep.var.labels = "Ingresos Municipales per cápita 2000")
print(paste("t-estadístico:", round(t_stat, 3)))
print(paste("F-estadístico:", round(f_stat, 3)))
print(paste("¿Instrumento relevante? (t > 1.96):", abs(t_stat) > 1.96))
print(paste("¿Instrumento fuerte? (F > 10):", f_stat > 10))
# Selección de variables.
gasto <- c("pmun_exp_funct_educ_cult2000c",
"pmun_exp_funct_health_sanit2000c",
"pmun_exp_funct_transport2000c",
"pmun_exp_funct_welf2000c")
# Función para estimar VI
estimar_vi <- function(var_dep, BD_0) {
formula_str <- paste(var_dep, "~ mun_budget_revenue2000_pred_c + latitude1998 + longitude1998 +
dist_federal_capital1998 + dist_state_capital1998 + state_capital |
oilandgasvalue2000_cap + latitude1998 + longitude1998 +
dist_federal_capital1998 + dist_state_capital1998 + state_capital")
ivreg(as.formula(formula_str), data = BD_0)
}
# Estimaciones VI para gastos
vi_educacion <- estimar_vi("pmun_exp_funct_educ_cult2000c", BD_filtrada)
vi_salud <- estimar_vi("pmun_exp_funct_health_sanit2000c", BD_filtrada)
vi_transporte <- estimar_vi("pmun_exp_funct_transport2000c", BD_filtrada)
vi_transferencias <- estimar_vi("pmun_exp_funct_welf2000c", BD_filtrada)
# Tabla de resultados gastos
stargazer(vi_educacion, vi_salud, vi_transporte, vi_transferencias,
type = "text",
title = "Efectos VI en Gasto Público Reportado 2000",
column.labels = c("Educación", "Salud", "Transporte", "Transferencias"),
keep = "mun_budget_revenue2000_pred_c")
# VI para variables de bienestar
vi_favelas <- estimar_vi("p_hhld_abovestrandard_ppl_2000", BD_filtrada)
vi_salones <- estimar_vi("clroomsMunicipal_pop2005", BD_filtrada)
# Tabla de resultados bienestar
stargazer(vi_favelas, vi_salones,
type = "text",
title = "Efectos VI en Variables de Bienestar",
column.labels = c("% No en Favelas 2000", "Salones por Millón 2005"),
keep = "mun_budget_revenue2000_pred_c")
# Interpretación específica para favelas (primera variable)
coef_favelas <- coef(vi_favelas)["mun_budget_revenue2000_pred_c"]
se_favelas <- summary(vi_favelas)$coefficients["mun_budget_revenue2000_pred_c", "Std. Error"]
cat("\nInterpretación para proporción que no vive en favelas:\n")
cat(sprintf("Un millón de reais adicionales en ingresos municipales está asociado con un cambio de %.4f puntos porcentuales en la proporción de personas que no viven en condiciones por debajo del estándar.\n",
coef_favelas * 1000000))
cat(sprintf("Error estándar: %.4f\n", se_favelas * 1000000))
cat(sprintf("¿Estadísticamente significativo? %s\n",
ifelse(abs(coef_favelas/se_favelas) > 1.96, "Sí", "No")))
# VI para variables de bienestar
vi_favelas <- estimar_vi("p_hhld_abovestrandard_ppl_2000", BD_filtrada)
vi_salones <- estimar_vi("clroomsMunicipal_pop2005", BD_filtrada)
# Tabla de resultados bienestar
stargazer(vi_favelas, vi_salones,
type = "text",
title = "Efectos VI en Variables de Bienestar",
column.labels = c("% No en Favelas 2000", "Salones por Millón 2005"),
keep = "mun_budget_revenue2000_pred_c")
# Interpretación específica para favelas (primera variable)
coef_favelas <- coef(vi_favelas)["mun_budget_revenue2000_pred_c"]
se_favelas <- summary(vi_favelas)$coefficients["mun_budget_revenue2000_pred_c", "Std. Error"]
cat("\nInterpretación para proporción que no vive en favelas:\n")
cat(sprintf("Un millón de reales adicionales en ingresos municipales está asociado con un cambio de %.4f puntos porcentuales en la proporción de personas que no viven en condiciones por debajo del estándar.\n",
coef_favelas * 1000000))
cat(sprintf("Error estándar: %.4f\n", se_favelas * 1000000))
cat(sprintf("¿Estadísticamente significativo? %s\n",
ifelse(abs(coef_favelas/se_favelas) > 1.96, "Sí", "No")))
View(BD_0)
# VI para variables de bienestar
vi_favelas <- estimar_vi("p_hhld_abovestrandard_ppl_2000", BD_filtrada)
vi_salones <- estimar_vi("clroomsMunicipal_pop2005", BD_filtrada)
# Tabla de resultados bienestar
stargazer(vi_favelas, vi_salones,
type = "text",
title = "Efectos VI en Variables de Bienestar",
column.labels = c("% No en Favelas 2000", "Salones por Millón 2005"),
keep = "mun_budget_revenue2000_pred_c")
# Interpretación específica para favelas (primera variable)
coef_favelas <- coef(vi_favelas)["mun_budget_revenue2000_pred_c"]
se_favelas <- summary(vi_favelas)$coefficients["mun_budget_revenue2000_pred_c", "Std. Error"]
cat("\nInterpretación para proporción que no vive en favelas:\n")
cat(sprintf("Un millón de reales adicionales en ingresos municipales está asociado con un cambio de %.4f puntos porcentuales en la proporción de personas que no viven en condiciones por debajo del estándar.\n",
coef_favelas * 1000000))
cat(sprintf("Error estándar: %.4f\n", se_favelas * 1000000))
cat(sprintf("¿Estadísticamente significativo? %s\n",
ifelse(abs(coef_favelas/se_favelas) > 1.96, "Sí", "No")))
# VI para variables de bienestar
vi_favelas <- estimar_vi("p_hhld_abovestrandard_ppl_2000", BD_filtrada)
vi_salones <- estimar_vi("clroomsMunicipal_pop2005", BD_filtrada)
# Tabla de resultados bienestar
stargazer(vi_favelas, vi_salones,
type = "text",
title = "Efectos VI en Variables de Bienestar",
column.labels = c("% No en Favelas 2000", "Salones por Millón 2005"),
keep = "mun_budget_revenue2000_pred_c")
# Interpretación específica para favelas (primera variable)
coef_favelas <- coef(vi_favelas)["mun_budget_revenue2000_pred_c"]
se_favelas <- summary(vi_favelas)$coefficients["mun_budget_revenue2000_pred_c", "Std. Error"]
# cat("\nInterpretación para proporción que no vive en favelas:\n")
# cat(sprintf("Un millón de reales adicionales en ingresos municipales está asociado con un cambio de %.4f puntos porcentuales en la proporción de personas que no viven en condiciones por debajo del estándar.\n",
#             coef_favelas * 1000000))
# cat(sprintf("Error estándar: %.4f\n", se_favelas * 1000000))
# cat(sprintf("¿Estadísticamente significativo? %s\n",
#             ifelse(abs(coef_favelas/se_favelas) > 1.96, "Sí", "No")))
#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,   #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,  #Calcular los efectos fijos
plm,  #Datos de panel
knitr,   #Visualizar tablas adicionales
ivreg  #Regresiones por variables instrumentales
)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T2/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/oil_windfall_sin10perc.dta"))
# Ver estructura de los datos
glimpse(BD_0)
head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
# Filtrar para municipios costeros sin petróleo onshore
#5. Para este taller, corran la regresión únicamente para municipios costeros (coastal = 1) y que reciben petróleo únicamente del mar (onshore = 0).
BD_filtrada <- BD_0 %>%
filter(coastal == 1,
onshore == 0)
print(paste("Observaciones después del filtro:", nrow(BD_filtrada)))
#Regresion del modelo simple.
etapa_1 <- lm(mun_budget_revenue2000_pred_c ~ oilandgasvalue2000_cap +
latitude1998 + longitude1998 + dist_federal_capital1998 +
dist_state_capital1998 + state_capital,
data = BD_filtrada)
# Resultados primera etapa
summary(etapa_1)
# Estadísticos de relevancia
coef_oil <- summary(etapa_1)$coefficients["oilandgasvalue2000_cap", ]
t_stat <- coef_oil["t value"]
f_stat <- summary(etapa_1)$fstatistic[1]
# Crear tabla para primera etapa
stargazer(etapa_1, type = "text",
title = "Primera Etapa: Ingresos Municipales",
omit = c("latitude1998", "longitude1998", "dist_federal_capital1998",
"dist_state_capital1998", "state_capital", "Constant"),
dep.var.labels = "Ingresos Municipales per cápita 2000")
print(paste("t-estadístico:", round(t_stat, 3)))
print(paste("F-estadístico:", round(f_stat, 3)))
print(paste("¿Instrumento relevante? (t > 1.96):", abs(t_stat) > 1.96))
print(paste("¿Instrumento fuerte? (F > 10):", f_stat > 10))
# Selección de variables.
gasto <- c("pmun_exp_funct_educ_cult2000c",
"pmun_exp_funct_health_sanit2000c",
"pmun_exp_funct_transport2000c",
"pmun_exp_funct_welf2000c")
# Función para estimar VI
estimar_vi <- function(var_dep, BD_0) {
formula_str <- paste(var_dep, "~ mun_budget_revenue2000_pred_c + latitude1998 + longitude1998 +
dist_federal_capital1998 + dist_state_capital1998 + state_capital |
oilandgasvalue2000_cap + latitude1998 + longitude1998 +
dist_federal_capital1998 + dist_state_capital1998 + state_capital")
ivreg(as.formula(formula_str), data = BD_0) # Estimación por VI
}
# Estimaciones VI para gastos
vi_educacion <- estimar_vi("pmun_exp_funct_educ_cult2000c", BD_filtrada)
vi_salud <- estimar_vi("pmun_exp_funct_health_sanit2000c", BD_filtrada)
vi_transporte <- estimar_vi("pmun_exp_funct_transport2000c", BD_filtrada)
vi_transferencias <- estimar_vi("pmun_exp_funct_welf2000c", BD_filtrada)
# Tabla de resultados gastos
stargazer(vi_educacion, vi_salud, vi_transporte, vi_transferencias,
type = "text",
title = "Efectos VI en Gasto Público Reportado 2000",
column.labels = c("Educación", "Salud", "Transporte", "Transferencias"),
keep = "mun_budget_revenue2000_pred_c")
# VI para variables de bienestar
vi_favelas <- estimar_vi("p_hhld_abovestrandard_ppl_2000", BD_filtrada)
vi_salones <- estimar_vi("clroomsMunicipal_pop2005", BD_filtrada)
# Tabla de resultados bienestar
stargazer(vi_favelas, vi_salones,
type = "text",
title = "Efectos VI en Variables de Bienestar",
column.labels = c("% No en Favelas 2000", "Salones por Millón 2005"),
keep = "mun_budget_revenue2000_pred_c")
# Interpretación específica para favelas (primera variable)
coef_favelas <- coef(vi_favelas)["mun_budget_revenue2000_pred_c"]
se_favelas <- summary(vi_favelas)$coefficients["mun_budget_revenue2000_pred_c", "Std. Error"]
# cat("\nInterpretación para proporción que no vive en favelas:\n")
# cat(sprintf("Un millón de reales adicionales en ingresos municipales está asociado con un cambio de %.4f puntos porcentuales en la proporción de personas que no viven en condiciones por debajo del estándar.\n",
#             coef_favelas * 1000000))
# cat(sprintf("Error estándar: %.4f\n", se_favelas * 1000000))
# cat(sprintf("¿Estadísticamente significativo? %s\n",
#             ifelse(abs(coef_favelas/se_favelas) > 1.96, "Sí", "No")))
